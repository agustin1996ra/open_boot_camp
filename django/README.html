<!DOCTYPE html>
<html>
<head>
<title>README.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="django">Django</h1>
<h2 id="1-introducci%C3%B3n">1. Introducción</h2>
<h3 id="presentaci%C3%B3n">Presentación</h3>
<p>Profe: Juan José Ruiz
Desarrollo web con python Django</p>
<h4 id="que-vamos-a-aprender">Que vamos a aprender?</h4>
<ul>
<li>Conceptos básicos</li>
<li>Arquitectura</li>
<li>Modelar datos</li>
<li>Hacer consultas</li>
<li>Hacer templates</li>
<li>Usar el panel de administración</li>
</ul>
<p>Que es necesario saber:</p>
<ul>
<li>python</li>
<li>html</li>
<li>css</li>
</ul>
<h3 id="instalaci%C3%B3n">Instalación</h3>
<h4 id="requerimientos-de-software">Requerimientos de software</h4>
<ul>
<li>python</li>
<li>pip</li>
<li>django</li>
</ul>
<h4 id="comprobamos-que-django-esta-instalado">Comprobamos que django esta instalado</h4>
<p>Para ello vamos a crear un proyecto de prueba para comprobar, que se ha instalado correctamente. Usando el comando:</p>
<pre class="hljs"><code><div>django<span class="hljs-literal">-admin</span> startproject holamundo
</div></code></pre>
<p>Si django se ha ejecutado de forma correcta veremos en la carpeta que ejecutamos el comando, que se creo una carpeta con el nombre del proyecto, y una estructura interna de archivos y directorios.</p>
<h3 id="patr%C3%B3n-de-arquitectura">Patrón de arquitectura</h3>
<p>Django es un framework gratuito hecho en python
Un framework es un conjunto de herramientas, librerías y estructura, que nos permite trabajar de forma ágil. A la hora de trabajar en el desarrollo web no es necesario estar inventando la rueda, si no que nos ayudamos de los frameworks para reutilizar herramientas, y desarrollar ágilmente.</p>
<p>En el desarrollo web, hay partes que siempre se repiten, como los son:</p>
<ul>
<li>un tablero de control</li>
<li>servicio de login y autenticación de usuarios
Todas estas acciones son comunes en el desarrollo web.</li>
</ul>
<p>Ademas django nos facilitara una estructura de arquitectura de nuestra pagina.</p>
<h4 id="patr%C3%B3n-mvc">Patrón MVC</h4>
<p><img src="img/mvc.jpg" alt="model view controller">
En este modelo lo que tenemos es un usuario, que realiza una petición a una url, es decir esta en el navegador y escribe la dirección de una pagina web.
Entonces lo que ocurre, es que se accede a un diccionario de urls, donde asocia cada una de estas urls a un controlador.
El controlador, es el que sabe lo que tiene que realizar.</p>
<p>Por ejemplo, si uno esta accediendo a un blog, el controlador asociado a esa url, tendrá las funciones esenciales, como pueden ser, consultar los últimos posts, recabar toda la información necesaria.
El controlador llamara a los modelos. El modelo es una abstracción de los datos que tenemos en nuestra base de datos. Y el modelo puede ser tratado como una clase, pudiendo de esta manera abstraerse de la base de datos, que queda en un segundo plano, y utilizar las propiedades definidas de la clase modelo.
El modelo al final, esta conectado a la base de datos y interactúa con ella, mediante un <strong>ORM</strong>(object relational mapping).
Nosotros manipulamos los objetos del modelo, y es el orm quien se encarga de leer, escribir y trabajar con la base de datos.
En el ejemplo, nuestro modelo obtiene los datos  mediante el el orm de la base de datos, y el controlador puede ver los objetos obtenidos por el modelo, y de esa forma el controlador obtiene los datos.
Una vez que el controlador obtiene los datos, lo que hace es pasar esos datos a la vista.
La vista obtiene los datos, y es la que se encarga de mostrar los datos en pantalla.</p>
<p>Los controladores contiene la lógica y la vista tiene las plantillas donde se despliegan los datos.</p>
<p>De esta arquitectura mvc es de donde deriva la arquitectura de django mtv.</p>
<h4 id="patr%C3%B3n-de-arquitectura-mtv">Patrón de arquitectura MTV</h4>
<p>MTV (model template view)
Los mcv son pensados en un principio para componentes más pequeños, y mtv para estructuraras de componentes o aplicaciones mas grandes. por eso django decidió renombrarlas para evitar la polémica.</p>
<p>En esta funciona exactamente igual, solo que a los controladores los vamos a llamar vistas y a las vistas templates/plantillas.
<img src="img/mtv.jpg" alt="model template view"></p>
<h3 id="estructura-de-archivos">Estructura de archivos</h3>
<p>En la carpeta del proyecto veremos un archivo <code>manage.py</code> y una carpeta que es del mismo nombre de un proyecto. Django se divide en aplicaciones, estas serán carpetas.
El archivo <code>manage.py</code> es muy importante, pero no es un archivo que nosotros vallamos a modificar, este se encarga de ponernos a disposición la estructura de nuestro proyecto para que podamos desde la terminal trabajar con comandos propios de django. Es el que nos va a permitir gestionar nuestro proyecto.</p>
<p>Es importante recordar que django nos permite gestionar nuestro proyecto de forma modular, por lo tanto podemos tener varias aplicaciones, cada aplicación se gestiona como un paquete.</p>
<p>Ahora de manera de ejemplo vamos a entrar a nuestra aplicación <code>holamundo</code>, en nuestro proyecto de prueba <code>holamundo</code>, dentro de ella podemos ver la estructura de archivos que nos ha generado django.
<img src="img/app-holamundo.jpg" alt="estructura de archivos"></p>
<p>Cada una de las aplicaciones debe contener en su directorio un archivo <code>__init__.py</code>, para que podamos gestionar cada aplicación como un paquete.
Tenemos  dentro de esta estructura dos archivos que nos van a ayudar con el servidor de pruebas y otro tipo de acciones de pruebas, que estarán <code>asgi.py</code> y <code>wsgi.py</code>.</p>
<p>Luego tenemos los archivos que si vamos a estar manipulando <code>settings.py</code> y <code>urls.py</code>.</p>
<h4 id="urlspy"><code>urls.py</code></h4>
<p>Este archivo se va encargar de asociar las direcciones url con las vistas/views.
En este archivos tenemos una lista que se llama <code>urlpatterns</code>, donde vamos a ir escribiendo todas las urls asociadas a las vistas con las que las vamos a ir controlando.</p>
<h4 id="settingspy"><code>settings.py</code></h4>
<p>En este archivo vamos a poner las configuraciones del paquete. Dentro de este archivo hay una lista llamada <code>INSTALLED_APPS</code>, donde tendremos las aplicaciones que vienen instaladas por defecto.
También podremos ver los templates, los midwares(aquí encontraremos aps de seguridad.)</p>
<p>También podremos configurar las conexiones con la base de datos y el motor controlador.</p>
<h5 id="installedapps">Installed_apps</h5>
<ul>
<li><code>django.contrib.admin</code>
Este sirve para establecer un panel de control de administración.</li>
<li><code>django.contrib.auth</code>
Para gestionar las autenticaciones y los usuarios</li>
<li><code>django.contrib.contenttypes</code>
Para los diferentes tipos de contenidos</li>
<li><code>django.contrib.sessions</code>
Para gestionar las sesiones.</li>
<li><code>django.contrib.messages</code>
Para gestionar los mensajes</li>
<li><code>django.contrib.staticsfiles</code>
Para controlar la carga de archivos estáticos</li>
</ul>
<h3 id="primer-hola-mundo-en-django">Primer Hola mundo en Django</h3>
<p>En el archivo <code>urls.py</code>, lo que hacemos es asociar cada una de las rutas de nuestro proyecto con una vista.</p>
<p>Debemos crear nuestro archivo de vistas, para controlar la ruta, y vamos a devolver un mensaje http para comprobar un circuito completo de esta arquitectura.</p>
<p>Lo primero que debemos hacer es entrar a la una consola, en la dirección de nuestro proyecto.
Y vamos a crear la estructura de base de datos necesaria para poder funcionar.
Para eso django lo que tiene que hacer es migrar los modelos de datos que tenemos al sistema de permanencia de datos.
Para ello se utiliza el comando <code>migrate</code>.
Este comando se utilizara cada vez que modifiquemos el modelo de la estructura de datos.</p>
<p>De manera de prueba, utilizaremos el motor SQLlite, y luego en un entorno de producción mudaremos a postgre.</p>
<p>Debemos recodar que el archivo <code>manage.py</code>, es el que debemos llamar siempre que queramos realizar una acción en nuestro proyecto. Osea que la instrucción sera a través de ese archivo.</p>
<pre class="hljs"><code><div>PS C:\rep\open_boot_camp\django\prueba\holamundo&gt;python manage.py migrate
Operations to perform:
  Applying auth.<span class="hljs-number">0004</span>_alter_user_username_opts... OK
  Applying auth.<span class="hljs-number">0005</span>_alter_user_last_login_null... OK
  Applying auth.<span class="hljs-number">0006</span>_require_contenttypes_0002... OK
  Applying auth.<span class="hljs-number">0007</span>_alter_validators_add_error_messages... OK
  Applying auth.<span class="hljs-number">0008</span>_alter_user_username_max_length... OK
  Applying auth.<span class="hljs-number">0009</span>_alter_user_last_name_max_length... OK
  Applying auth.<span class="hljs-number">0010</span>_alter_group_name_max_length... OK
  Applying auth.<span class="hljs-number">0011</span>_update_proxy_permissions... OK
  Applying auth.<span class="hljs-number">0012</span>_alter_user_first_name_max_length... OK
  Applying sessions.<span class="hljs-number">0001</span>_initial... OK
</div></code></pre>
<blockquote>
<p>Siempre los comandos deben realizarse desde la ubicación del archivo <code>manage.py</code></p>
</blockquote>
<p>Al ejecutar el comando, django debería habernos creado una base de datos.</p>
<blockquote>
<p>La extension para poder ver la base de datos SQLlite, SQLtools SQLlite.</p>
</blockquote>
<h4 id="comprobar-el-proyecto-con-el-servidor-de-pruebas">Comprobar el proyecto con el servidor de pruebas</h4>
<p>Para poder ejecutar el proyecto en el servidor de pruebas, usaremos el comando <code>python manage.py runserver</code>.</p>
<p>Al ejecutar el comando debería levantarnos un servidor, y devolver por consola este mensaje:</p>
<pre class="hljs"><code><div>PS C:\rep\open_boot_camp\django\prueba\holamundo&gt; python manage.py runserver

Performing system checks...

System check identified no issues (<span class="hljs-number">0</span> silenced).
December <span class="hljs-number">20</span>, <span class="hljs-number">2022</span> - <span class="hljs-number">12</span>:<span class="hljs-number">00</span>:<span class="hljs-number">01</span>
Django version <span class="hljs-number">4.0</span>.<span class="hljs-number">4</span>, <span class="hljs-keyword">using</span> settings <span class="hljs-string">'holamundo.settings'</span>
Starting development server at http://<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">8000</span>/
Quit the server with CTRL<span class="hljs-literal">-BREAK</span>.
</div></code></pre>
<p>Al hacer click en el enlace ip del servidor, debería abrirnos una pagina en el navegador, si todo salio bien, veremos el siguiente mensaje.
<img src="img/hola-mundo-correcto.jpg" alt="correcto"></p>
<p>Y para interrumpir la ejecución del servidor debemos apretar <code>ctrl</code>+<code>C</code>.</p>
<h4 id="ahora-vamos-a-hacer-nuestro-primer-hola-mundo">Ahora vamos a hacer nuestro primer Hola Mundo</h4>
<p>Para ello vamos a necesitar un archivo de vistas <code>views.py</code>. Que es donde vamos a declarar las vistas con las que vamos a trabajar.</p>
<p>Las vistas son muy sencillas, son las que van a contener la lógica. Mediante una colección de funciones. Es decir dentro de una vista vamos a tener diferentes funciones, y van a estar relacionadas cada una con una url, en el archivos <code>urls.py</code>.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># views.py</span>
<span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> HttpResponse  <span class="hljs-comment"># Para utilizarla debe ser importada</span>

<span class="hljs-string">"""
 Para definir una vista, se utiliza la definición de funciones,
en django, las vistas siempre van a tener al menos un parámetro "request", que es la petición, que recibiremos de nuestra url, la petición de ejecutar esta vista.

El request es importante, ya que si bien en este ejemplo, solo see mostrara un mensaje, el parámetro request podrá devolver información de interés. Como puede ser datos de autenticación, datos de formulario.
"""</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">saludo</span><span class="hljs-params">(request)</span>:</span>
    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">"Hola Mundo"</span>)
</div></code></pre>
<p>Una vez creada la vista debemos, asociar esa vista a una url.
En el archivo <code>urls.py</code>, dentro de la lista <code>urlpatterns</code> vamos a crear un nuevo path.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># urls.py</span>

<span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin
<span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path
<span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> views  <span class="hljs-comment"># debemos importar el archivo views</span>

urlpatterns = [
    path(<span class="hljs-string">'admin/'</span>, admin.site.urls),
    path(<span class="hljs-string">'saludo/'</span>, views.saludo, name=<span class="hljs-string">'saludo'</span>)  <span class="hljs-comment"># Y vincular la función con una ruta</span>
]

</div></code></pre>
<p>Una vez realizados estos cambios en los archivos, podemos ejecutar nuestro live server y comprobar que en la dirección <code>ip/saludo/</code> se muestra el texto indicado en la vista.</p>
<h2 id="2-rutas-y-plantillas">2. Rutas y plantillas</h2>
<h3 id="rutas-con-par%C3%A1metros">Rutas con parámetros</h3>
<p>Las rutas con parámetros nos vana permitir, recepcionar variables a través de la url que vamos a poder utilizar en nuestra vista.
Hasta el momento todas las rutas que hemos agregado al proyecto &quot;Hola mundo&quot;, son rutas estáticas. No están recibiendo ninguna información de la url.</p>
<p>En django para poder recibir variables a través de la ruta, debemos agregarlas encerradas entre <code>&lt;&gt;</code>, e indicar el tipo de variable, dos puntos seguido de su nombre de variable.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># urls.py</span>
<span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin
<span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path
<span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> views

urlpatterns = [
    path(<span class="hljs-string">'admin/'</span>, admin.site.urls),
    path(<span class="hljs-string">'saludo/'</span>, views.saludo, name=<span class="hljs-string">'saludo'</span>),
    path(<span class="hljs-string">'despedida/'</span>, views.despedida, name=<span class="hljs-string">'despedida'</span>),
    path(<span class="hljs-string">'adulto/&lt;int:edad&gt;/'</span>, views.adulto, name=<span class="hljs-string">'adulto'</span>)
]

</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># views.py</span>
<span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> HttpResponse

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">saludo</span><span class="hljs-params">(request)</span>:</span>
    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">'Hola mundo!'</span>)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">despedida</span><span class="hljs-params">(request)</span>:</span>
    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">'Hasta luego'</span>)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">adulto</span><span class="hljs-params">(request, edad)</span>:</span>
    <span class="hljs-keyword">if</span> edad &gt;= <span class="hljs-number">18</span>:
        <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">"Eres mayor de edad"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">"No eres mayor de edad"</span>)

</div></code></pre>
<p>Para probar el funcionamiento de la ruta, debemos ejecutar el live server,
y darle la ruta a nuestra vista seguido de el valor de nuestra variable. En este caso podría ser <code>ip/adulto/18</code>, y nos llevara a una pagina que tendrá el mensaje de &quot;Eres mayor de edad&quot;.</p>
<p>Esto nos sera muy util a la hora de poder, a través de una ruta a una publicación, una noticia, un producto, construyendo la ruta del objeto que deseamos consultar. Para poder empezar a vincular el contenido de forma mas interactiva.</p>
<h3 id="uso-de-plantillas">Uso de plantillas</h3>
<blockquote>
<p>Vamos a crear un nuevo proyecto llamado plantillas</p>
</blockquote>
<p>En el caso anterior, osea en el proyecto con el que estuvimos trabajando antes, nos salteamos el paso de MVT, de devolver un plantilla al usuario, como respuesta a un consulta, devolvíamos una respuesta Http simple.
Ahora empezaremos a trabajar para devolver una plantilla al usuario.
Esa plantilla sera una colección de archivo HTML. De esta forma lo que logramos es separar la parte visual de nuestro proyecto de la parte lógica.
La parte lógica se encontrara dentro del archivo views, y la parte visual estará en los templates.
Las plantillas nos servirán también, para estructurar nuestro proyecto, de manera que podamos evitar, el uso de código html repetido.</p>
<blockquote>
<p>concepto: herencia de plantillas</p>
</blockquote>
<p>Lo primero que debemos hacer es determinar, cual va ser el directorio donde vamos a poner todas nuestra plantillas(nuestros archivos html), en el archivo settings.py.</p>
<p>Dentro de este archivo veremos que tenemos una lista donde se guardaran los parámetros que mirara django para encontrar las plantillas.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># settings.py</span>

TEMPLATES = [
    {
        <span class="hljs-string">'BACKEND'</span>: <span class="hljs-string">'django.template.backends.django.DjangoTemplates'</span>,
        <span class="hljs-string">'DIRS'</span>: [<span class="hljs-string">'templates'</span>],  <span class="hljs-comment"># este sera el lugar donde agregaremos el nombre de la carpeta que contendrá nuestras plantillas, ene este caso el nombre sera "templates"</span>
        <span class="hljs-string">'APP_DIRS'</span>: <span class="hljs-literal">True</span>,
        <span class="hljs-string">'OPTIONS'</span>: {
            <span class="hljs-string">'context_processors'</span>: [
                <span class="hljs-string">'django.template.context_processors.debug'</span>,
                <span class="hljs-string">'django.template.context_processors.request'</span>,
                <span class="hljs-string">'django.contrib.auth.context_processors.auth'</span>,
                <span class="hljs-string">'django.contrib.messages.context_processors.messages'</span>,
            ],
        },
    },
]
</div></code></pre>
<p>Una ves especificado el directorio de las plantillas, vamos a crear un archivo llamado igual que la función <code>simple</code>, que le pondremos un <code>&lt;h1&gt;&quot;Hola mundo&quot;&lt;/h1&gt;</code>.</p>
<p>Luego en el archivo <code>views.py</code>, tenemos varias posibilidades con el siguiente paso. Una de ellas es abrir un archivo, renderizarlo, y una vez utilizado cerrarlo. Sin embargo django nos va a facilitar este paso, utilizando un método de la librería <em>shortcuts</em> llamado <em>render</em>, que nos va a permitir renderizar los templates.</p>
<p>El método <code>render()</code> va a necesitar de tres parámetros para funcionar, el primero sera la <code>request</code> para que sea consistente, en segundo lugar la dirección del archivo html que sera la plantilla, y un tercero que sera el contexto, en este caso, no tendremos nada, ya que la plantilla que armamos es estática, osea que no necesita de variables o parámetros. Pero en un futuro utilizaremos plantillas que necesitaran parámetros y información para mostrar al usuario lo datos de su consulta.</p>
<p>Un contexto en django, no sera mas que un diccionario, que tendrá llaves y valores.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># views.py</span>
<span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">simple</span><span class="hljs-params">(request)</span>:</span>
    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">'simple.html'</span>, {})

</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">&lt;!-- simple.html --&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hola mundo<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<h3 id="uso-de-contextos">Uso de contextos</h3>
<p>A lo largo de esta sección se vera como generar plantillas de contexto dinámico.</p>
<p>En este caso a la hora de dar la dirección en el archivo <code>urls.py</code>, también debemos dales los valores contextuales, ya que nos estamos refiriendo a una consulta a una plantilla dinámica.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># urls.py</span>
<span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin
<span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path
<span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> views

urlpatterns = [
    path(<span class="hljs-string">'admin/'</span>, admin.site.urls),
    path(<span class="hljs-string">'simple/'</span>, views.simple, name=<span class="hljs-string">'simple'</span>),
    path(<span class="hljs-string">'dinámico/&lt;str=name&gt;'</span>, views.dinámico, name=<span class="hljs-string">'dinámico'</span>)
]

</div></code></pre>
<p>En el caso de la configuración de la función que describe la vista en el archivo <code>view.py</code>, también debemos agregar en los parámetros de la función, los valores que nos darán el comportamiento de la búsqueda que desplegara los datos sobre la plantilla.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># views.py</span>

<span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">din</span>á<span class="hljs-title">mico</span><span class="hljs-params">(request, name)</span>:</span>
    context = {<span class="hljs-string">'name'</span> : name}
    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">'dinámico.html'</span>, context)

</div></code></pre>
<p>Para utilizar el valor de contexto en la plantilla, debemos usar dobles llaves, y escribir el nombre de la llave del diccionario, descrito en el archivo <code>views.py</code>.</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hola {{name}}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<p><img src="img/plantilla_dinamica.jpg" alt="plantilla dinámica"></p>
<p>En el contexto que le pasamos a la plantilla, no solo podemos pasarle nombres de llaves, sino también le podemos pasar objetos, y sus variables y métodos asociados.</p>
<h3 id="bucles-y-condicionales-en-plantillas">Bucles y condicionales en plantillas</h3>
<p>En esta sección vamos a ver como recorrer estructuras de datos, para completar nuestras plantillas.</p>
<p>Como principio de la arquitectura, es fundamental no delegar partes de la lógica a la plantilla, como tampoco asi delegar partes del estilo visual al la vista.</p>
<p>Para recorrer estructuras de datos, para visualizar esos datos( osea, que no son lógicas de comportamiento), podemos incluir en el archivo html, código en nomenclatura python.</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hola {{name}}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Categorías<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        {% for category in categories %}
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>{{ category }}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        {% endfor %}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<p>Teniendo en cuenta, que categories es una lista que definimos en la vista.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">din</span>á<span class="hljs-title">mico</span><span class="hljs-params">(request, name)</span>:</span>
    categories = [<span class="hljs-string">'code'</span>, <span class="hljs-string">'design'</span>, <span class="hljs-string">'marketing'</span>]
    context = {<span class="hljs-string">'name'</span>: name, <span class="hljs-string">'categories'</span> : categories}
    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">'dinámico.html'</span>, context)

</div></code></pre>
<p>El resultado de dicha configuración es la siguiente:</p>
<p><img src="img/bucles y estruc.jpg" alt="bucle en la plantilla"></p>
<p>Si quisiéramos destacar un valor, en caso de que se encuentre dentro del contexto que le pasamos a la plantilla, podremos agregar un <code>if</code></p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hola {{name}}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Categorías<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        {% for category in categories %}
            {% if category == 'code' %}
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>{{category}}<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            {% else %}
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>{{ category }}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            {% endif %}
        {% endfor %}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<p>Esta plantilla, se comportara de esta manera:</p>
<p><img src="img/bucle y condicional.jpg" alt="bucle y condicional"></p>
<p>Como podemos observar, que la palabra <code>code</code> esta en negrita, y las otras no.</p>
<h3 id="comentarios-y-filtros">Comentarios y filtros</h3>
<p>En esta sección vamos a ver cosas útiles para la hora de trabajar sobre las plantillas, como son los comentarios y los filtros.</p>
<h4 id="comentarios">Comentarios</h4>
<p>Los comentarios html, son visibles cuando uno inspecciona la pagina desde el navegador, pero ahora veremos comentarios que no serán visibles, ya que django no los renderizará en el navegador.</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    {% comment %}
    Esto es un comentario multilinea 
    fsdffsdfs
    {% endcomment %}
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hola {{name}}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Categorías<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        {# Este es un comentario simple o de una sola linea #}
        {% for category in categories %}
            {% if category == 'code' %}
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>{{category}}<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            {% else %}
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>{{ category }}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            {% endif %}
        {% endfor %}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<h4 id="filtros">Filtros</h4>
<p>Supongamos que quiero con el ejemplo anterior, poner luego de la renderización de los objetos de la lista <code>categories</code>, el total de elementos. Esto podría realizarlo creando una nueva variable, en el archivo <code>views.py</code> donde se almacene el largo de la lista, o también lo puedo hacer utilizando un filtro en la plantilla.</p>
<p>Para el uso de filtros se utiliza la siguiente sintaxis, dentro de las dobles llaves ponemos el nombre de variable, seguido por el símbolo pipe o tubería <code>|</code>, continuado por el nombre del filtro que le deseamos aplicar. En este caso <code>length</code>. Esta construcción sintáctica tomara una forma así<code>{{categories|length}}</code></p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    {% comment %}
    Esto es un comentario multilinea 
    fsdffsdfs
    {% endcomment %}
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hola {{name}}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Categorías<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        {# este es un comentario simple o de una línea #}
        {% for category in categories %}
            {% if category == 'code' %}
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>{{category}}<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            {% else %}
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>{{ category }}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            {% endif %}
        {% endfor %}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h5</span>&gt;</span>Total de categorías: {{ categories|length }}<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<p>El resultado sera el siguiente:</p>
<p><img src="img/filtros.jpg" alt="filtro"></p>
<p>Completar con todos los filtros en Django desde la documentación oficial.</p>
<h3 id="archivos-est%C3%A1ticos">Archivos estáticos</h3>
<p>Creamos un nuevo proyecto con el comando <code>django-admin startproject estáticos</code></p>
<p>Vamos a realizar la migración principal del sistema, entrando en el directorio del proyecto, vamos ejecutar el comando <code>python manage.py migrate</code></p>
<p>Vamos a repetir todo el circuito para agregar una plantilla.</p>
<p>Hasta ahora todo los contenidos que hemos estado creando se ha basado en etiquetas, pero en el desarrollo de una pagina vamos a necesitar varios tipos de contenidos, como pueden ser imágenes, archivos css, o archivos java script, estos son llamados archivos estáticos.</p>
<p>Como se realiza la importación de archivos estáticos en una plantilla?</p>
<p>Lo primero es ir al archivo <code>settings.py</code>, y en la variable <code>STATIC_URL</code>, y ver que ruta tiene especificada.</p>
<p>Por defecto la ruta que viene, es <code>'static/'</code>, osea el directorio <strong>static</strong> en la raíz del proyecto.</p>
<p>y debemos agregar las siguientes lineas en el archivo:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># settings.py</span>

STATICFILES_DIRS = [
    BASE_DIR / <span class="hljs-string">"static"</span>,
    <span class="hljs-string">'/var/www/static'</span>,
]
</div></code></pre>
<p>En la plantilla debemos agregar esta configuración:</p>
<pre class="hljs"><code><div>{% load static %} <span class="hljs-comment">&lt;!-- esto debemos agregar --&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{% static 'style.css' %}"</span>&gt;</span>  <span class="hljs-comment">&lt;!-- esto también --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Estáticos<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<p>Después crearemos un archivo css dentro de la carpeta static.</p>
<pre class="hljs"><code><div><span class="hljs-selector-tag">h1</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">50px</span>;
    <span class="hljs-attribute">color</span>: red;
}
</div></code></pre>
<p>Podemos ver que el resultado de nuestra pagina tiene los estilos especificados en el archivo <code>css</code>.</p>
<p><img src="./img/archivo estatico css.jpg" alt="css estático"></p>
<h3 id="herencia-de-plantillas">Herencia de plantillas</h3>
<p>En esta sección, vamos a trabajar con otro proyecto django llamado <code>herencia</code>.</p>
<p>El concepto de herencia se aplica para, mejorar la estructura de nuestro proyecto y no caer en el error de repetir muchas veces la misma estructura de plantilla.</p>
<p>Por ejemplo, en el siguiente caso tenemos tres views, que llaman a tres plantillas diferentes, y si miramos las plantillas son idénticas una a otra.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># views.py</span>
<span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">herencia</span><span class="hljs-params">(request)</span>:</span>
    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">'herencia.html'</span>, {})

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">ejemplo</span><span class="hljs-params">(request)</span>:</span>
    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">'ejemplo.html'</span>, {})

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">otra</span><span class="hljs-params">(request)</span>:</span>
    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">'otra.html'</span>, {})
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">&lt;!-- herencia.html --&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Herencia<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">&lt;!-- ejemplo.html --&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Ejemplo<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">&lt;!-- otra.html --&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Otra<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<p>Como podemos ver, estamos repitiendo la misma estructura, al realizar el plantillado.</p>
<p>Ahora veremos como vamos a armar el plantillado para poder heredar, las partes de la plantilla que se repite en todas las paginas.
Para eso vamos a utilizar un archivo llamado <code>base.html</code> en un sub directorio llamado <code>layouts</code> de la carpeta <code>templates</code>.</p>
<p>En este archivo lo que haremos es dejar especificados diferentes bloques, que serán utilizados por las diferentes sub plantillas, por ejemplo, tendremos un bloque <code>content</code> en el main, este bloque lo utilizaran todas las paginas, por que sera donde se desplegara el contenido. Pero después hay paginas que pueden requerir, un estilo especial, entonces dejamos un bloque llamado <code>styles</code>, para que dichas paginas puedan hacer uso de él.</p>
<p>El bloque <code>title</code>, también sera utilizado por todas, al igual que <code>content</code>. Y luego del body podemos dejar un bloque para que aquellas paginas que necesiten importar un archivo script, puedan hacerlo.</p>
<p>Por asi decirlo, dejando estos, bloques dejamos los lugares donde es posible que nuestras sub plantillas se diferencien de la base.</p>
<pre class="hljs"><code><div><span class="hljs-comment">&lt;!-- base.html --&gt;</span>
{% load static %}
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{% static 'style.css' %}"</span>&gt;</span>
    {% block styles %}{% endblock styles %}
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>{% block title %}{% endblock title %}<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>Herencia<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>Ejemplo<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>Otra<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
        {% block content %}{% endblock content %}
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Todos los derechos reservados<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
    {% block scripts %}{% endblock scripts %}
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<p>También configuramos un archivo css, básico como para darle un estructura visual simple a las paginas.</p>
<pre class="hljs"><code><div><span class="hljs-comment">/* style.css */</span>
* {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">box-sizing</span>: border-box;
}

<span class="hljs-selector-tag">nav</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#666</span>;
}

<span class="hljs-selector-tag">ul</span> {
    <span class="hljs-attribute">list-style-type</span>: none;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">align-content</span>: center;
}

<span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span>{
    <span class="hljs-attribute">padding</span>:  <span class="hljs-number">20px</span>;
}

<span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">a</span>{
    <span class="hljs-attribute">text-decoration</span>: none;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">color</span>: white;
}

<span class="hljs-selector-tag">main</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">min-height</span>: <span class="hljs-number">75vh</span>;
}

<span class="hljs-selector-tag">footer</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#666</span>;
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">50px</span>;
}
</div></code></pre>
<p>Luego, para indicar en las plantillas <code>herencia.html</code>, <code>ejemplo.html</code> y <code>otra.html</code>, heredan de la plantilla <code>base.html</code>, se utilizara un bloque de código django en las plantillas.</p>
<pre class="hljs"><code><div><span class="hljs-comment">&lt;!-- herencia.html --&gt;</span>
{% extends './layouts/base.html' %}

</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">&lt;!-- ejemplo.html --&gt;</span>
{% extends './layouts/base.html' %}

</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">&lt;!-- otra.html --&gt;</span>
{% extends './layouts/base.html' %}

</div></code></pre>
<p>De esta manera ya indicamos en las sub plantillas que extenderemos la plantilla base, tal cual como se extiende una clase.</p>
<p>Pero nos falta, por si decirlo, implementar los bloques que han quedado vacíos en la plantilla base.</p>
<p>Vamos a empezar con el la plantilla <code>herencia.html</code></p>
<pre class="hljs"><code><div><span class="hljs-comment">&lt;!-- herencia.html --&gt;</span>
{% extends './layouts/base.html' %}

{% block title %}Herencia{% endblock title %}

{% block content %}
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Herencia<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
{% endblock content %}
</div></code></pre>
<p>Como se puede ver, los bloques <code>styles</code> y <code>scripts</code>, no los estoy usando, eso es por que implemento solo aquellos bloques que necesito para esta sub plantilla, el resto no son relevantes en este caso.</p>
<p>Lo que nos permite eso no solo es, reducir la cantidad de repeticiones en las plantillas, si no que en el caso de necesitar agregar algo en nuestra pagina, solo deberemos agregarla a la plantilla base. Por ejemplo, si en esta quisiéramos agregar el nombre de la empresa en el menu de navegación, simple mente sería agregar una linea, a dicho archivo, sin tener que controlar cuestiones de consistencia estética entre las diferentes paginas de nuestro proyecto.</p>
<h3 id="enlace-e-inclusi%C3%B3n">Enlace e inclusión</h3>
<p>En esta sección vamos a estar trabajando sobre el mismo proyecto que en la sección anterior. Lo primero que vamos a hacer es agregar un path para la ruta raíz.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># urls.py</span>
<span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin
<span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path
<span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> views

urlpatterns = [
    path(<span class="hljs-string">'admin/'</span>, admin.site.urls),
    path(<span class="hljs-string">'herencia/'</span>, views.herencia, name=<span class="hljs-string">'herencia'</span>),
    path(<span class="hljs-string">'ejemplo/'</span>, views.ejemplo, name=<span class="hljs-string">'ejemplo'</span>),
    path(<span class="hljs-string">'otra/'</span>, views.otra, name=<span class="hljs-string">'otra'</span>),
    path(<span class="hljs-string">''</span>, views.index, name=<span class="hljs-string">'index'</span>)  <span class="hljs-comment"># path para la ruta raíz</span>
]
</div></code></pre>
<p>Luego en las vistas vamos a definir la vista de <code>index</code>.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># views.py</span>
<span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span><span class="hljs-params">(request)</span>:</span>
    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">'index.html'</span>, {})

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">herencia</span><span class="hljs-params">(request)</span>:</span>
    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">'herencia.html'</span>, {})

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">ejemplo</span><span class="hljs-params">(request)</span>:</span>
    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">'ejemplo.html'</span>, {})

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">otra</span><span class="hljs-params">(request)</span>:</span>
    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">'otra.html'</span>, {})
</div></code></pre>
<p>Ahora vamos a continuar viendo como se hacen las vinculaciones entre las distintas vistas/plantillas, ya que hasta ahora hemos venido trabajando con la barra de direcciones, y de esa manera nos hemos estado moviendo por nuestros proyectos.</p>
<p>Para ello vamos a trabajar sobre el archivo <code>base.html</code>, que es el archivo que tiene el menu de enlaces. Y lo que haremos es darle la dirección a cada uno de los enlaces que tiene el menu de navegación.</p>
<p>Y para darle esta dirección al enlace, utilizaremos el nombre que hemos estado poniéndole en la configuración de las urls, ya que esto presenta una ventaja, por que si en un momento tuviésemos la necesidad de cambiar las rutas de los urls, tendríamos que alterar también los enlaces referidos a ellas. Sin embargo al trabajar con los nombres no tendremos esos problemas.</p>
<p>Al agregar los nombres de las direcciones, utilizaremos un comando de django, con las llaves y los símbolos de porcentaje, utilizando la palabra <code>url</code> y seguido por el nombre entre comillas de la dirección.</p>
<pre class="hljs"><code><div><span class="hljs-comment">&lt;!-- base.html --&gt;</span>
{% load static %}
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{% static 'style.css' %}"</span>&gt;</span>
    {% block styles %}{% endblock styles %}
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>{% block title %}{% endblock title %}<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- Aquí es donde agregaremos los nombres, de las
             direcciones, utilizando un comando de django --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{% url 'herencia' %}"</span>&gt;</span>Herencia<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{% url 'ejemplo' %}"</span>&gt;</span>Ejemplo<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{% url 'otra' %}"</span>&gt;</span>Otra<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
        {% block content %}{% endblock content %}
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Todos los derechos reservados<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
    {% block scripts %}{% endblock scripts %}
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<p>En el caso de nuestra plantilla base, hay posibilidades, de seguir atomizando aun mas el código, y hacerlo más legible y mejor optimizado, para ello vamos a hacer uso de los <code>includes</code>(inclusión).</p>
<p>Para ello, vamos a crear una carpeta dentro de <code>templates/layouts</code> que se llame <code>partials</code>. Y dentro de ella vamos a crear un archivo html que se llame <code>menu</code>. Ahora en vez de tener el menu en la plantilla base, vamos a extraerlo y dejarlo en el archivo <code>menu.html</code> a toda la etiqueta <code>&lt;nav&gt;</code>.
Y luego lo que haremos será agregar en el archivo <code>base.html</code>, y para ello, com estamos en el archivo base, lo que hacemos no es utilizar la herencia de plantilla, si no es la inclusión de contenido html. Que es otro concepto de django.</p>
<pre class="hljs"><code><div><span class="hljs-comment">&lt;!-- menu.html --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{% url 'index' %}"</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{% url 'herencia' %}"</span>&gt;</span>Herencia<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{% url 'ejemplo' %}"</span>&gt;</span>Ejemplo<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{% url 'otra' %}"</span>&gt;</span>Otra<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">&lt;!-- base.html --&gt;</span>
{% load static %}
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{% static 'style.css' %}"</span>&gt;</span>
    {% block styles %}{% endblock styles %}
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>{% block title %}{% endblock title %}<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    {% include './partials/menu.html' %}
    <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
        {% block content %}{% endblock content %}
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Todos los derechos reservados<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
    {% block scripts %}{% endblock scripts %}
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<p>De esta manera, podemos modularizar un poco mas nuestro plantillado.</p>
<p>Por ejemplo, otro caso donde podríamos seguir modularizando es en el caso del footer, osea que dentro de la carpeta partials, podríamos agregar un archivo <code>footer.html</code></p>
<pre class="hljs"><code><div><span class="hljs-comment">&lt;!-- base.html --&gt;</span>
{% load static %}
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{% static 'style.css' %}"</span>&gt;</span>
    {% block styles %}{% endblock styles %}
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>{% block title %}{% endblock title %}<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    {% include './partials/menu.html' %}
    <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
        {% block content %}{% endblock content %}
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
    {% include './partials/footer.html' %}
    {% block scripts %}{% endblock scripts %}
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<p>Y de esta manera seguir atomizando un poco mas nuestro proyecto. Esto es importante en la medida de lo posible, ir atomizando, nuestro código para hacerlo mas manejable y mas fácil de leer.</p>
<h3 id="documentaci%C3%B3n-oficial">Documentación oficial</h3>
<p>En esta sección, vamos a explorar la documentación de django, para entender como navegar la en caso de tener alguna duda o un problema, que nos sea util.</p>
<h3 id="practica-de-plantillas">Practica de plantillas</h3>
<p>El objetivo de esta practica es muy sencillo, vamos a hacer una pagina con dos urls, en una sección inicial, que va ocupar el directorio raíz, vamos a tener una imagen nuestra con info, y en una segunda sección vamos listar un conjunto de imágenes que harán las veces de nuestro porfolio.</p>
<h2 id="3-vistas-y-modelos">3. Vistas y modelos</h2>
<h3 id="modularizaci%C3%B3n">Modularización</h3>
<p>En esta sección vamos a ver el concepto de modularización.</p>
<p>Gracias al concepto de modularización vamos a poder reciclar, gran parte de nuestros proyectos en django, no solo la parte del frontal y las plantillas, si no también en la parte de las aplicaciones y el backend.</p>
<p>Para poder entender esto, vamos a profundizar aún más en la arquitectura de django.</p>
<p>Hasta ahora los proyectos que venimos desarrollando, hemos estado trabajando en la aplicación principal de nuestros proyectos.</p>
<p>Pero debemos entender que el el desarrollo de nuestros proyectos en django, van a estar conformadas por mas de una aplicación.</p>
<p>Y para cumplir con el propósito de que nuestros proyectos sean modulares, tenemos que pensar muy bien cuales serán las acciones que nuestro proyecto debe realizar y cumplir, y para poder llevar a adelante un buen diseño de aplicaciones que se encarguen de cumplir las metas de esas acciones de nuestro proyecto.</p>
<p>Para entender de mejor manera esto, vamos a ver un ejemplo:</p>
<p>Supongamos que tenemos que desarrollar el proyecto de un portal de noticias, para ello, tenemos que cumplir con ciertas tareas que serán necesarias para que este cuente con la funcionalidades requeridas.</p>
<p>En este ejemplo podríamos tener las siguientes aplicaciones:</p>
<ul>
<li>Gestor de post (publicaciones)</li>
<li>Login social, con un gestor de sesiones</li>
<li>Un gestor de comentarios en las publicaciones</li>
<li>Gestor de anuncios</li>
<li>Gestionar el compartir en redes sociales.</li>
</ul>
<p><img src="./img/ej-modularizacion.jpg" alt="ejemplo de un proyecto modularizado"></p>
<p>Entonces a la hora de encarar un proyecto con muchas funciones, en ves de que una sola aplicación tenga programada la lógica de todas estas características, vamos a partir el desarrollo de las características en diferentes aplicaciones. Para que a la hora de abordar el desarrollo, no terminemos con un código espagueti, y una aplicación que si falla perdemos todas las funcionalidades de nuestro proyecto.</p>
<p>Y supongamos ahora que tenemos que desarrollar un proyecto de un periódico digital, en este tendremos una aplicación de gestor de suscripciones, otra de los feed, y otra en la que se le ofrece al usuario una ventanilla de pagos. Pero también seguramente necesitaremos un gestor de sesiones, entonces, si nosotros en el proyecto anterior, ya habíamos desarrollado esa funcionalidad en una aplicación modular, tranquilamente podemos incorporarla en este nuevo proyecto de forma sencilla.</p>
<p>Para poder lograr este proceso de forma solida, las aplicaciones deben ser auto suficientes, esto quiere decir que deben tener su modelo de datos, su base de datos, sus vistas y plantillas donde se muestren los datos, todo de forma integrada. Entonces a la hora de reciclar una aplicación será, una tarea muy sencilla y practica.</p>
<p>Y solo deberemos ocuparnos de integrar la estética del modulo que estamos importando.</p>
<h4 id="pr%C3%A1ctica">Práctica</h4>
<p>Ahora haremos un proyecto de practica, donde crearemos mas de una aplicación.
Creamos un nuevo proyecto llamado modularización. Y una segunda aplicación llamada comentarios.</p>
<pre class="hljs"><code><div>&gt; django<span class="hljs-literal">-admin</span> startproject modularización
&gt; cd .\modularización\
&gt; python manage.py startapp comentarios
</div></code></pre>
<p><img src="./img/modularizacion.jpg" alt="arq de módulos"></p>
<p>Podemos ver en la arquitectura del modulo que hemos creado, que este ya cuenta con su propia estructura. Y que esta consiste por partes ya conocidas, y otras nuevas.</p>
<p>Para agregar correctamente la aplicación en nuestro proyecto, debemos incluirla en la lista de <code>INSTALLED_APPS</code>  del archivo <code>settings.py</code>. Como habita en la raíz del proyecto, podemos agregarla directamente en, con el nombre del directorio que la contiene, en este caso <code>comentarios</code>.</p>
<p>Se puede usar el comando <code>check</code> para confirmar que la aplicación esta configurada correctamente.</p>
<pre class="hljs"><code><div>&gt; python manage.py check comentarios
System check identified no issues (<span class="hljs-number">0</span> silenced).
</div></code></pre>
<h3 id="modelos-de-datos">Modelos de datos</h3>
<p>Para crear un modelo de datos en django, en vez de crear tablas, sus campos y relaciones, vamos a crear clases en lenguaje python. Y a la hora e crear registros, estaremos creado objetos a partir de las clases. Entonces el orm de django, por cada clase que creemos, creara una tabla. Donde cada atributo de nuestra clase sera una columna en una tabla.</p>
<p>De esta manera django nos permite migrar de un lenguaje de base de datos a otro, ya que la estructura de clases es igual, y django se encarga de la comunicación con el servidor de base de datos. Para ello solo debemos cambiar la configuración del motor de base de datos en el archivo <code>settings.py</code>.</p>
<p>Para practicar este concepto de modelación de datos, vamos a usar el proyecto &quot;modularización&quot;.</p>
<p>Los modelos de datos, se escriben dentro de el archivo <code>models.py</code> de las aplicaciones secundarias de un proyecto. Utilizaremos la aplicación comentarios para crear nuestro primer modelo.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># models.py</span>
<span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models

<span class="hljs-comment"># Create your models here.</span>
</div></code></pre>
<p>Podemos ver que, ya por defecto, django nos importa de la librería de bases de datos <code>models</code>, esto es por que sera la clase que vamos a extender al crear nuestros modelos.</p>
<p>Una primera modelación para nuestros comentarios podría ser:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># models.py</span>
<span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">comments</span><span class="hljs-params">(models.Model)</span>:</span>

    name = models.CharField(max_length=<span class="hljs-number">50</span>, null=<span class="hljs-literal">False</span>)
    score = models.IntegerField(default=<span class="hljs-number">3</span>)
    comment = models.TextField(max_length=<span class="hljs-number">1000</span>, null=<span class="hljs-literal">True</span>)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-keyword">return</span> self.name

</div></code></pre>
<p>Creamos una clase <code>comments</code>, que tiene los atributos de <code>name</code> que es un <code>CharField</code> que tiene un máximo de caracteres de 50 y que no puede ser nulo, otro atributo es la puntuación <code>score</code> que por defecto si no se especifica es 3, y por ultimo el contenido del comentario como <code>comment</code> que puede ser nulo y que tiene un máximo de caracteres de 1000</p>
<p>Para el siguiente paso debemos usar el comando <code>makemigrations</code>, que se usaba cuando creamos el proyecto para que se ejecuten las migraciones de iniciación, y cada vez que cambiemos nuestro modelo de datos, debemos volver a ejecutarlo.</p>
<pre class="hljs"><code><div>PS C:\rep\open_boot_camp\django\prueba\modularizacion&gt; python manage.py makemigrations
Migrations <span class="hljs-keyword">for</span> <span class="hljs-string">'comentarios'</span>:
  comentarios\migrations\<span class="hljs-number">0001</span>_initial.py
    - Create model comments
</div></code></pre>
<p>Este comando creara un archivo de migración inicial, donde se crearan las migraciones para el modelo de la aplicación comentarios.</p>
<p>Una vez creada la migración, nos queda ejecutarla con el comando <code>migrate</code>.</p>
<pre class="hljs"><code><div>PS C:\rep\open_boot_camp\django\prueba\modularizacion&gt; python manage.py migrate
Operations to perform:
  Apply all migrations: admin, auth, comentarios, contenttypes, sessions
Running migrations:
  Applying contenttypes.<span class="hljs-number">0001</span>_initial... OK
  Applying auth.<span class="hljs-number">0001</span>_initial... OK
  Applying admin.<span class="hljs-number">0001</span>_initial... OK
  Applying admin.<span class="hljs-number">0002</span>_logentry_remove_auto_add... OK
  Applying admin.<span class="hljs-number">0003</span>_logentry_add_action_flag_choices... OK 
  Applying contenttypes.<span class="hljs-number">0002</span>_remove_content_type_name... OK  
  Applying auth.<span class="hljs-number">0002</span>_alter_permission_name_max_length... OK  
  Applying auth.<span class="hljs-number">0003</span>_alter_user_email_max_length... OK
  Applying auth.<span class="hljs-number">0004</span>_alter_user_username_opts... OK
  Applying auth.<span class="hljs-number">0005</span>_alter_user_last_login_null... OK
  Applying auth.<span class="hljs-number">0006</span>_require_contenttypes_0002... OK
  Applying auth.<span class="hljs-number">0007</span>_alter_validators_add_error_messages... OK
  Applying auth.<span class="hljs-number">0008</span>_alter_user_username_max_length... OK    
  Applying auth.<span class="hljs-number">0009</span>_alter_user_last_name_max_length... OK   
  Applying auth.<span class="hljs-number">0010</span>_alter_group_name_max_length... OK
  Applying auth.<span class="hljs-number">0011</span>_update_proxy_permissions... OK
  Applying auth.<span class="hljs-number">0012</span>_alter_user_first_name_max_length... OK  
  Applying comentarios.<span class="hljs-number">0001</span>_initial... OK
  Applying sessions.<span class="hljs-number">0001</span>_initial... OK
</div></code></pre>
<p>Como podemos ver en la base de datos, se ha ejecutado correctamente el comando de migración, creando una tabla llamada <code>comentarios_comments</code>. Al crear una clase sin especificar nada sobre el atributo id, django creara ese campo por defecto.</p>
<p><img src="./img/modelo_de_datos.jpg" alt="modelo de datos"></p>
<h4 id="modificaci%C3%B3n-de-un-modelo-de-datos">Modificación de un modelo de datos</h4>
<p>En el caso que deseáramos modificar un modelo de datos, lo haremos directamente en el archivo models.py de la aplicación. Una vez realizada la modificación crearemos la migración (django detectara el cambio) con el comando <code>python3 manage.py makemigrations</code> y luego ejecutaremos la migración con el comando <code>python3 manage.py migrate</code>.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># models.py</span>
<span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">comments</span><span class="hljs-params">(models.Model)</span>:</span>

    name = models.CharField(max_length=<span class="hljs-number">50</span>, null=<span class="hljs-literal">False</span>)
    score = models.IntegerField(default=<span class="hljs-number">3</span>)
    comment = models.TextField(max_length=<span class="hljs-number">1000</span>, null=<span class="hljs-literal">True</span>)
    date = models.DateField(null=<span class="hljs-literal">True</span>)
    

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-keyword">return</span> self.name
</div></code></pre>
<p><img src="img/cambio modelo de datos.png" alt="cambio de modelo"></p>
<h4 id="en-caso-de-modificaci%C3%B3n-sin-valor-default">En caso de modificación sin valor default</h4>
<p>Como vemos en la modificación anterior, se especifica que el valor date, puede ser nulo, hay que tener en cuenta esto, ya que como la base de datos puede contener datos ya, quiere decir que se agregan campos a filas ya existentes. Estas si no tienen permitido tener un valor nulo, en la definición del nuevo campo, generara un error al hacer el plan de migración, ya que django se dará cuenta del error. Este error interrumpirá la creación del plan de  migración, y nos dará dos opciones, proveer un valor por default en el momento, desde la terminal o cancelar la creación del plan de migración y darle un valor por default al campo desde el archivo de modelos, o permitir que tenga valor nulo.</p>
<h4 id="planes-de-migraci%C3%B3n">Planes de migración</h4>
<p>Para entender mejor, que es lo que hace django cuando modificamos el modelo de datos y le pedimos que haga un plan de migración para esas modificaciones, vamos a observar, los archivos <code>.py</code> que crea en la carpeta migrations.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># 0002_comments_date.py</span>
<span class="hljs-comment"># Generated by Django 3.2.12 on 2023-03-02 21:28</span>

<span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> migrations, models


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Migration</span><span class="hljs-params">(migrations.Migration)</span>:</span>

    dependencies = [
        (<span class="hljs-string">'comentarios'</span>, <span class="hljs-string">'0001_initial'</span>),
    ]

    operations = [
        migrations.AddField(
            model_name=<span class="hljs-string">'comments'</span>,
            name=<span class="hljs-string">'date'</span>,
            field=models.DateField(null=<span class="hljs-literal">True</span>),
        ),
    ]
</div></code></pre>
<p>Aca vemos las acciones que django se dio cuenta que debía hacer para poder agregar a nuestra tabla de comentarios el campo de la fecha que le habíamos especificado en el modelo de datos.</p>
<p>Estas migraciones van generando un historial, que nos permite volver atrás en la estructura de datos.</p>
<h3 id="delegaci%C3%B3n-de-rutas">Delegación de rutas</h3>
<p>En esta parte del desarrollo vamos a ver como conectar, nuestro proyecto general a el contenido de las aplicaciones. Con el objetivo de luego poder trabajar con los modelos de las aplicaciones.</p>
<p>Vamos a comenzar creado un fichero <code>urls.py</code> dentro de nuestra aplicación, en este caso seguiremos trabajando con el proyecto <code>modularizacion</code>, y conectaremos la aplicación <code>comentarios</code>.</p>
<p>Vamos a trabajar en la aplicación, como anteriormente trabajamos sobre el proyecto, es decir configuraremos las urls y las vistas de la aplicación, como si fuese un proyecto.</p>
<p>Copiamos la estructura del archivo <code>urls.py</code> de nuestro proyecto general y la pegamos en el nuevo <code>urls.py</code> de la aplicación comentarios.</p>
<p>Para empezar vamos solamente a configurar un <code>hola mundo</code></p>
<pre class="hljs"><code><div><span class="hljs-comment"># urls.py</span>

<span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin
<span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path
<span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> views

urlpatterns = [
    path(<span class="hljs-string">'test/'</span>, views.test, name=<span class="hljs-string">'test'</span>)
]

</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># views.py</span>

<span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render
<span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> HttpResponse

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test</span><span class="hljs-params">(request)</span>:</span>
    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">"Funciona correctamente"</span>)

</div></code></pre>
<p>Todo esto esta configuración esta dentro de nuestra aplicación, lo que quiere decir es que si nosotros corremos el live server, no podremos acceder a esta vista a través de la url que acabamos de configurar.
Por que el proyecto general esta gobernado por la configuración que tiene dentro de <code>modularizacion</code>, y si vemos el archivo <code>urls.py</code> de este, no tenemos todavía acceso a lo que ocurre dentro de la aplicación <code>comentarios</code>.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># urls.py (modularizacion)</span>
<span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin
<span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path
<span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> include

urlpatterns = [
    path(<span class="hljs-string">'admin/'</span>, admin.site.urls),
    path(<span class="hljs-string">'comentarios/'</span>, include(<span class="hljs-string">'comentarios.urls'</span>))
]

</div></code></pre>
<p>Como se ve en arriba, utilizamos la función include, que debimos importarla. Des esta manera integramos a nuestro proyecto todas las urls que ese encuentran el el archivo <code>urls.py</code> de nuestra aplicación comentarios. Para acceder a estas debemos darle la dirección, precedida del nombre de la aplicación a la que pertenece. Por ejemplo: <code>http://127.0.0.1:8000/comentarios/test/</code></p>
<p><img src="img/test comentarios.png" alt="test comentarios"></p>
<p>Con el objetivo de dejar las configurado para el próximo tema, creamos una vista simple llamada create, para abordar luego CRUD, la completamos con un
HttpResponse, y le dejamos configurada una url con el nombre create.</p>
<h3 id="creaci%C3%B3n-y-borrado-de-datos">Creación y borrado de datos</h3>
<p>En esta sección seguiremos utilizando el proyecto de modularizacion. Una cuestión a tener en cuenta, que pasamos por alto, es que en la construcción de los modelos utilizamos el nombre &quot;comments&quot; pero los modelos por convención siempre deben ir con la primera letra en mayúsculas y en singular &quot;Comment&quot;.</p>
<p>Lo normal a la hora de crear un modelo, seria crear un formulario para poder ingresar datos a ese modelo, sin embargo todavía no hemos llegado a esa parte, y por ahora agregaremos datos desde la vista. Entonces cuando accedamos a la ruta vamos a crear un dato automáticamente, esto no es un comportamiento usual ni recomendable. Pero nos servirá para ver como se crean dichos objetos.</p>
<h4 id="creamos-un-comentario-desde-views">Creamos un comentario desde views</h4>
<p>Para crear un objeto, tenemos que importar a nuestro archivo <code>views.py</code> la clase <code>Comment</code> del archivo <code>models.py</code>.</p>
<p>Como podemos observar desde la configuración de nuestro modelo, sabemos los datos que se deben aportar para crear un comentario.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Comment</span><span class="hljs-params">(models.Model)</span>:</span>

    name = models.CharField(max_length=<span class="hljs-number">50</span>, null=<span class="hljs-literal">False</span>)
    score = models.IntegerField(default=<span class="hljs-number">3</span>)
    comment = models.TextField(max_length=<span class="hljs-number">1000</span>, null=<span class="hljs-literal">True</span>)
    date = models.DateField(null=<span class="hljs-literal">True</span>)
    signature = models.CharField(max_length=<span class="hljs-number">100</span>, default=<span class="hljs-string">"Firma"</span>)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-keyword">return</span> self.name
</div></code></pre>
<p>Debemos darle un nombre, ya que este no puede ser nulo. Los demás valores de nuestro dato, pueden ser nulos. Ya que el <code>score</code> tiene un valor por defecto, <code>comment</code> puede ser nulo, también <code>date</code> y <code>signature</code> tiene un valor por defecto.</p>
<p>Para crear este dato, vamos a crear un objeto, llamando a la clase <code>Comment</code> y le pasaremos como argumentos name=&quot;Agus&quot;, score=5, comment=&quot;Este es un comentario&quot;.
Y luego para generar la acción de guardado, vamos a utilizar la función <code>save()</code>, como función de nuestro objeto. Esto le indicara a django que pase estos argumentos del objeto a la base de datos.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># views.py</span>
<span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render
<span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> HttpResponse
<span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Comment

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test</span><span class="hljs-params">(request)</span>:</span>
    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">"Funciona correctamente"</span>)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span><span class="hljs-params">(request)</span>:</span>
    comment = Comment(name=<span class="hljs-string">"Agus"</span>, score=<span class="hljs-number">5</span>, comment=<span class="hljs-string">"Este es un comentario."</span>)
    comment.save()
    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">"Ruta para probar la creación de modelos"</span>)
</div></code></pre>
<p>Al recargar la pagina <code>comentarios/create/</code> debería haber ejecutado estas acciones y se deberá ver reflejadas en la base de datos.</p>
<p><img src="./img/primer-registro-bd.jpg" alt="primer registro"></p>
<h5 id="otra-forma-de-crear-un-registro">Otra forma de crear un registro</h5>
<p>Esta no es la única forma de crear un registro, vamos a ver otro ejemplo, de como hacerlo.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># views.py</span>
<span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render
<span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> HttpResponse
<span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Comment

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test</span><span class="hljs-params">(request)</span>:</span>
    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">"Funciona correctamente"</span>)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span><span class="hljs-params">(request)</span>:</span>
    comment = Comment.objects.create(name=<span class="hljs-string">"Nicolas"</span>)
    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">"Ruta para probar la creación de modelos"</span>)
</div></code></pre>
<p>De esta forma, se guardara por defecto, gracias a la función create, dentro de objects.</p>
<p><img src="img/segundo-registro-bd.jpg" alt="segundo registro"></p>
<p>Podemos observar que django nos abstrae de tener que utilizar instrucciones sql, y nos deja con las herramientas de lógica que se explicitan en las vistas y utilizamos los objetos que preparamos de ante mano en los modelos.</p>
<h4 id="eliminar-un-dato">Eliminar un dato</h4>
<p>Para ello crearemos una vista nueva, con su respectiva url.</p>
<p>Los siguiente sera encontrar el registro que deseamos eliminar de de nuestra base de datos, para ello vamos a crear un objeto, y a este le asignaremos el registro/dato que vamos a eliminar.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># views.py</span>

<span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render
<span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> HttpResponse
<span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Comment

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">delete</span><span class="hljs-params">(request)</span>:</span>
    comment = Comment.objects.get(id=<span class="hljs-number">1</span>)
    comment.delete()
    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">"Ruta para la eliminación de registros"</span>)
</div></code></pre>
<p>Podemos ver que utilizamos la función get, y le entregamos el valor de id, de registro, y luego eliminamos el registro asignado a ese objeto.</p>
<p><img src="./img/borrado del primer registro.jpg" alt="primer borrado"></p>
<h5 id="otra-forma-de-borrado">Otra forma de borrado</h5>
<p>Esta consiste en utilizar las funciones objects</p>
<pre class="hljs"><code><div><span class="hljs-comment"># views.py</span>
<span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render
<span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> HttpResponse
<span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Comment

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">delete</span><span class="hljs-params">(request)</span>:</span>
    Comment.objects.filter(id=<span class="hljs-number">2</span>).delete()
    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">"Ruta para la eliminación de registros"</span>)
</div></code></pre>
<p><img src="img/segundo borrado de registrobd.jpg" alt="segundo borrado de registros"></p>
<h3 id="estructuras-y-claves-for%C3%A1neas">Estructuras y claves foráneas</h3>
<h4 id="primer-paso">primer paso</h4>
<h4 id="segundo">segundo</h4>
<h5 id="sub-segundo">sub segundo</h5>

</body>
</html>
